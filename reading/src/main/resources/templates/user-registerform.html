<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ユーザー登録</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
	<nav class="navbar bg-info">
		<div class="container-fluid">
			<a class="navbar-brand text-light" href="">
				<i class="bi bi-book d-inline-block align-text-top" alt="Logo"></i>
				My Library
			</a>
		</div>
	</nav>
	<div class="container" th:object="${userRegistrationInput}">
		<div class="position-absolute start-50 translate-middle" aria-label="user-registration-area" style="top: 58%;">
			<div class="border border-secondary-subtle rounded p-3"  style="height: 27rem; width: 25rem;">
				<form th:action="@{/register-user}" method="post" class="needs-validation h-100 d-flex flex-column justify-content-between">
					<div class="p-2 text-center">
						<div class="h2">ユーザー登録</div>
	<!--					<div id="inputHelp" class="mt-3 form-text">どちらも半角英数字8文字以上20文字以下です</div>-->
					</div>
					<div th:if="${errorMassage != null}" class="alert alert-danger alert-dismissible fade show" role="alert">
						<div th:text="${errorMassage}"></div>
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
	                <div class="p-2">
						<div th:if="${#fields.hasErrors('username')}" th:errors="*{username}" class="text-danger">Name Error</div>
	                    <label for="username" class="form-label">ユーザー名</label>
	                    <input type="text" class="form-control" id="username" th:field="*{username}" placeholder="半角英数字8-20文字" required>
	                </div>
	                <div class="p-2" aria-label="password-area">
						<div th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="text-danger">Password Error</div>
						<label for="password" class="form-label">パスワード</label>
	                    <div class="position-relative" aria-label="password-input">
							<input type="password" class="form-control" id="password" th:field="*{password}" placeholder="半角英数字8-20文字" required>
	                    	<span class="position-absolute top-50 translate-middle-y" style="right: 5%;"><i id="eye-pointer" class="bi bi-eye-slash"></i></span>
	                    	<!-- パスワードの表示切り替え -->
	                    	<script>
								const passwordInput = document.getElementById("password");
								const eyePointer = document.getElementById("eye-pointer");
								eyePointer.addEventListener("click", function() {
									const currentType = passwordInput.type;
									if (currentType === "password") {
										 passwordInput.type = "text";
										 eyePointer.classList.remove("bi-eye-slash");
										 eyePointer.classList.add("bi-eye");
									} else {
										passwordInput.type = "password";
										eyePointer.classList.remove("bi-eye");
										eyePointer.classList.add("bi-eye-slash");
									}
								});
							</script>
	                    </div>
	                </div>
	                <div class="row p-2">
	                    <button class="btn btn-primary" type="submit">新規登録</button>
	                </div>
	            </form>
			</div>
			<div class="m-3">
				<p class="text-center">既に登録済みの方はこちら</p>
				<div class="d-grid col-6 mx-auto">
					<a class="btn btn-secondary" role="button" href="/login">ログインページへ</a>
				</div>
			</div>
		</div>
    </div>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
</body>
</html>