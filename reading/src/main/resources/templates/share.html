<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<nav class="navbar navbar-expand-lg bg-info mb-5" th:fragment="header" style="--bs-navbar-color: rgba(255, 255, 255, 0.55);
    --bs-navbar-hover-color: rgba(255, 255, 255, 0.75);
    --bs-navbar-disabled-color: rgba(255, 255, 255, 0.25);
    --bs-navbar-active-color: #fff;
    --bs-navbar-brand-color: #fff;
    --bs-navbar-brand-hover-color: #fff;
    --bs-navbar-toggler-border-color: rgba(255, 255, 255, 0.1);">
	<div class="container-fluid">
		<a class="navbar-brand" href="/user/home">
			<i class="bi bi-book d-inline-block align-text-top" alt="Logo"></i>
			My Library
		</a>
	    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon" style="background-image: url('data:image/svg+xml,%3csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 30 30\'%3e%3cpath stroke=\'rgba%28255, 255, 255, 0.55%29\' stroke-linecap=\'round\' stroke-miterlimit=\'10\' stroke-width=\'2\' d=\'M4 7h22M4 15h22M4 23h22\'/%3e%3c/svg%3e');"></span>
	    </button>
	    <div class="collapse navbar-collapse" id="navbarNavDropdown">
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link active" href="/user/home">Home</a>
				</li>
				<li class="nav-item">
					<a class="nav-link active" href="/user/finished-booklist">本棚</a>
				</li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">書籍一覧</a>
					<ul class="dropdown-menu">
						<li><a class="dropdown-item" href="/user/home">読書中</a></li>
						<li><a class="dropdown-item" href="/user/finished-booklist">読了済み</a></li>
					</ul>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/user/update/display-registerform">登録</a>
        		</li>
			</ul>
			<div class="ms-auto me-2">
				<div class="drop-down position-relative" style="color: white;">
					<div class="dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
						<i class="text-light fs-2 position-relative bi bi-person-circle" id="profile" style="opacity: 0.9;">
							<span class="position-absolute translate-middle border border-info rounded-circle hover" style="background-color: rgb(6, 255, 58); top: 25%; left: 72%; padding: 0.4rem;">
								<span class="visually-hidden">User Profile</span>
							</span>
					  	</i>
				  	</div>
				  	<ul class="dropdown-menu text-center" id="custom-dropdown" th:object="${userProfile}">
						  <li class="dropdown-item"><u>ユーザー名</u><p class="fs-5" th:text="*{username}"></p></li>
						  <li class="dropdown-item"><u>読書中の本</u><p><span class="fs-5" th:text="*{readingNumber}"></span><span>冊</span></p></li>
						  <li class="dropdown-item"><u>今まで読んだ本</u><div><span class="fs-5" th:text="*{finishedNumber}"></span><span>冊</span></div></li>
						  <li><hr class="dropdown-divider"></li>
						  <li><form th:action="@{/logout}" method="post"><button type="submit" class="btn btn-secondary">ログアウト</button></form></li>
				 	</ul>
				 	<script type="text/javascript">
					 	// hover effect
					 	const point = document.getElementById("profile");
					 	point.addEventListener("mouseover", () => {
							 point.style.opacity = 1;
					 	});
					 	point.addEventListener("mouseleave", () => {
							 point.style.opacity = 0.9;
					 	});
					 	// ドロップダウン位置調整
					 	const dropdownMenu = document.getElementById("custom-dropdown");
					 	const mediaQuery = window.matchMedia("(min-width: 768px)");
					 	function adjustDropdownMenuPosition() {
							 if (mediaQuery.matches) {
								 dropdownMenu.style.left = "-200%";
							} else {
								dropdownMenu.style.left = "auto";
						 	}
					  	}
					 	window.addEventListener("resize", adjustDropdownMenuPosition);
					 	adjustDropdownMenuPosition();
				 	</script>
			 	</div>
		 	</div>
	    </div>
    </div>
</nav>
</html>